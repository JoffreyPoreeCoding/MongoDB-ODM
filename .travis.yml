os: linux
arch:
  - arm64
  - ppc64le
  - s390x

language: php

php:
  - 8.0

# env:
#   - APCU_VERSION=5.1.18

services:
  - mongodb

before_install:
  - pecl channel-update pecl.php.net
  - pecl install -f mongodb
  # - yes '' | pecl install -f apcu-${APCU_VERSION}

before_script:
  - composer install --dev --no-interaction --prefer-source

script:
  - ./vendor/bin/phpunit

after_success:
    - bash <(curl -s https://codecov.io/bash)
  
